<div class="container">
  <app-sidenavbar></app-sidenavbar>

  <mat-sidenav-container class="container" style="height: 100vh;">
    <mat-sidenav-content class="content">
      <!-- One centered column for header + card -->
      <div class="page">
        <!-- Return button -->
        <button type="button" mat-button class="return" (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          Return
        </button>

        <!-- Card -->
        <div class="documents-table ">
          <!-- Controls -->
          <div class="controls">
            <mat-form-field appearance="outline" class="section-filter">
              <mat-label>Sort by Section</mat-label>
              <mat-select [(value)]="selectedSection" (selectionChange)="filterBySection($event.value)">
                <mat-option *ngFor="let section of sections" [value]="section">
                  {{ section }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        
          <!-- Table -->
          <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 full-width-table">

            <!-- Group ID -->
            <ng-container matColumnDef="groupId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Group ID</th>
              <td mat-cell *matCellDef="let element">{{ element.group_id }}</td>
            </ng-container>

            <!-- Title -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
              <td mat-cell *matCellDef="let element">{{ element.title }}</td>
            </ng-container>

            <!-- Submitted -->
            <ng-container matColumnDef="submissionDate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Submitted</th>
              <td mat-cell *matCellDef="let element">
                {{ element.submitted_at | date:'yyyy-MM-dd HH:mm' }}
              </td>
            </ng-container>

            <!-- Leader -->
            <ng-container matColumnDef="leader">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Leader</th>
              <td mat-cell *matCellDef="let element">{{ element.leader }}</td>
            </ng-container>

            <!-- Status -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
              <td mat-cell *matCellDef="let element" class="status-cell">
                <span
                  class="status-dot"
                  [ngClass]="{
                    'ongoing': element.status === 'Ongoing',
                    'rejected': element.status === 'Rejected',
                    'approved': element.status === 'Approved'
                  }">
                </span>
                <span class="status-text"
                  [ngClass]="{
                    'ongoing-text': element.status === 'Ongoing',
                    'rejected-text': element.status === 'Rejected',
                    'approved-text': element.status === 'Approved'
                  }">
                  {{ element.status }}
                </span>
              </td>
            </ng-container>

            <!-- Verify -->
            <ng-container matColumnDef="forApproval">
              <th mat-header-cell *matHeaderCellDef>Verify</th>
              <td mat-cell *matCellDef="let element" class="for-approval-cell">
                <button mat-raised-button color="primary" (click)="goToApproval(element.group_id)">
                  VERIFY
                </button>
              </td>
            </ng-container>

            <!-- Header + Rows -->
            <tr mat-header-row *matHeaderRowDef="groupColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: groupColumns;"></tr>
          </table>

          <!-- Paginator -->
          
        </div>
        <mat-paginator class="paginator" [pageSize]="5" [pageSizeOptions]="[5,10,20]"></mat-paginator>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
