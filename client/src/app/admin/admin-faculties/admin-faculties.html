<div class="layout">
   <app-admin-side-bar> </app-admin-side-bar>
  
    <div class="content">
      <!-- Toolbar row -->
      <div class="toolbar">
        <button type="button" mat-button class="return" (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          Return
        </button>
  
        <span class="spacer"></span>
  
        <button
          mat-raised-button
          color="accent"
          class="addButton"
          (click)="openAddDialog()">
          Add Faculty
        </button>
      </div>
  
      <!-- ================= Add Faculty Dialog ================== -->
      <ng-template #addFacultyDialog let-dialogRef="dialogRef">
        <div class="ag-header">
          <h3 class="ag-title">Add Faculty</h3>
          <button type="button" class="ag-close" (click)="dialogRef.close()" aria-label="Close">✕</button>
        </div>
  
        <mat-dialog-content class="ag-body">
          <form #addForm="ngForm" class="ag-form" (keydown.enter)="$event.preventDefault()">
            <!-- First Name -->
            <div class="ag-field-label">First Name</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                id="first_name"
                matInput
                [(ngModel)]="newFaculty.first_name"
                name="first_name"
                placeholder="e.g., Juan"
                aria-label="First Name"
                required />
            </mat-form-field>
  
            <!-- Last Name -->
            <div class="ag-field-label">Last Name</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                id="last_name"
                matInput
                [(ngModel)]="newFaculty.last_name"
                name="last_name"
                placeholder="e.g., Dela Cruz"
                aria-label="Last Name"
                required />
            </mat-form-field>
  
            <!-- Email -->
            <div class="ag-field-label">Email</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                id="email"
                type="email"
                matInput
                [(ngModel)]="newFaculty.email"
                name="email"
                placeholder="name@example.com"
                aria-label="Email"
                required />
            </mat-form-field>
  
            <!-- Faculty Number -->
            <div class="ag-field-label">Faculty Number</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                id="faculty_number"
                matInput
                [(ngModel)]="newFaculty.faculty_number"
                name="faculty_number"
                placeholder="FA0001MN2024"
                aria-label="Faculty Number"
                required />
            </mat-form-field>
          </form>
        </mat-dialog-content>
  
        <div class="ag-actions">
          <button
            type="button"
            mat-raised-button
            class="addButton"
            color="primary"
            [disabled]="addForm.invalid"
            (click)="dialogRef.close(newFaculty)">
            ADD
          </button>
        </div>
      </ng-template>
  
      <!-- ================== Edit Faculty Dialog ================== -->
      <ng-template #editFacultyDialog let-dialogRef="dialogRef">
        <div class="ag-header">
          <h3 class="ag-title">Edit Faculty</h3>
          <button type="button" class="ag-close" (click)="dialogRef.close()" aria-label="Close">✕</button>
        </div>
  
        <mat-dialog-content class="ag-body">
          <form #editForm="ngForm" class="ag-form" (keydown.enter)="$event.preventDefault()">
            <!-- First Name -->
            <div class="ag-field-label">First Name</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                matInput
                [(ngModel)]="editFaculty.first_name"
                name="edit_first_name"
                required />
            </mat-form-field>
  
            <!-- Last Name -->
            <div class="ag-field-label">Last Name</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                matInput
                [(ngModel)]="editFaculty.last_name"
                name="edit_last_name"
                required />
            </mat-form-field>
  
            <!-- Email -->
            <div class="ag-field-label">Email</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                type="email"
                matInput
                [(ngModel)]="editFaculty.email"
                name="edit_email"
                required />
            </mat-form-field>
  
            <!-- Faculty Number -->
            <div class="ag-field-label">Faculty Number</div>
            <mat-form-field appearance="outline" class="ag-field">
              <input
                matInput
                [(ngModel)]="editFaculty.faculty_number"
                name="edit_faculty_number"
                required />
            </mat-form-field>
          </form>
        </mat-dialog-content>
  
        <div class="ag-actions">
          <button
            type="button"
            mat-raised-button
            color="primary"
            class="addButton"
            [disabled]="editForm.invalid"
            (click)="dialogRef.close(editFaculty)">
            SAVE CHANGES
          </button>
        </div>
      </ng-template>
  
      <!-- ================== Table ================== -->
      <div class="rectangle">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          class="mat-elevation-z8 full-width-table no-table-margin">
  
          <!-- Faculty Name -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Faculty Name</th>
            <td mat-cell *matCellDef="let row">{{ row.first_name }} {{ row.last_name }}</td>
          </ng-container>
  
          <!-- Email -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
            <td mat-cell *matCellDef="let row">{{ row.email }}</td>
          </ng-container>
  
          <!-- Faculty Number -->
          <ng-container matColumnDef="faculty_number">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Faculty Number</th>
            <td mat-cell *matCellDef="let row">{{ row.faculty_number }}</td>
          </ng-container>
  
          <!-- Actions -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let row">
              <button
                mat-button
                class="link-btn"
                [disableRipple]="true"
                (click)="openEditDialog(row)">
                Edit Info
              </button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
  
        <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
      </div>
    </div>
  </div>
  